{"version":3,"sources":["context/AppContext/AppContext.js","context/PeopleListContext/PeopleListContext.js","helper/filterPeopleByName.js","helper/filterFavouritePeople.js","components/SearchBox/SearchBox.js","components/AppHead/AppHead.js","helper/createFileURL.js","helper/findPersonByID.js","utils/IndexedDB/indexedDBValidation.js","utils/IndexedDB/indexedDBManagement.js","components/PersonOptions/PersonOptions.js","helper/getPersonAge.js","components/Person/Person.js","components/EmptyBox/EmptyBox.js","components/DeletePersonDialog/DeletePersonDialog.js","assets/no-picture.png","helper/validatePicture.js","components/PictureInput/PictureInput.js","helper/dateFormatValidations.js","helper/validatePersonData.js","helper/dateValueValidations.js","components/AddPersonUIControls/AddPersonUIControls.js","components/AddPersonUIInfo/AddPersonUIInfo.js","components/PersonImgContainer/PersonImgContainer.js","components/AddPersonUI/AddPersonUI.js","components/EditPersonUIControls/EditPersonUIControls.js","components/EditPersonUI/EditPersonUI.js","components/Notification/Notification.js","helper/reformatDate.js","helper/sortingLogic.js","components/SortingSelectbox/SortingSelectbox.js","components/PersonList/PersonList.js","components/HomeMain/HomeMain.js","helper/handleSorting.js","components/MobileNav/MobileNav.js","components/DarkBackground/DarkBackground.js","providers/PeopleListProvider.js","utils/data.js","utils/defaultState.js","utils/reducer.js","providers/AppProvider.js","components/App/App.js","index.js"],"names":["AppContext","createContext","PeopleListContext","filterPeopleByName","people","name","filter","person","personName","toLowerCase","includes","filterFavouritePeople","inFavourites","SearchBox","setShowSearchBox","useContext","favState","state","setPeopleList","showFavourites","searchInput","useRef","handleChange","a","current","value","displayPeople","filteredPeople","console","log","handleSearchBoxClose","useEffect","handleKeyDown","e","key","window","addEventListener","removeEventListener","className","type","placeholder","onChange","ref","autoFocus","onClick","AppHead","setShowFavourites","useState","showSearchBox","style","color","aria-hidden","createFileURL","file","File","Blob","URL","createObjectURL","Error","findPersonByID","id","find","accesDB","database","version","myDB","openDB","upgrade","oldVersion","newVersion","transaction","createObjectStore","keyPath","getIDBStore","store","tx","myStore","objectStore","putItemToIDB","item","accessedStore","put","getDataFromIDBStore","getAll","data","delete","blobToArrayBuffer","blob","Promise","resolve","reject","reader","FileReader","result","readAsArrayBuffer","PersonOptions","props","currentPersonID","setCurrentPersonID","handleDeletePerson","dispatch","backgroundState","showEditPersonUIState","setShowBackground","setShowEditPersonUI","favText","setFavText","isPersonInFavourites","handleAddFavourites","oldPeople","modifiedPerson","payload","handleRemoveFavourites","onMouseEnter","mql","matchMedia","dropDownBtn","document","querySelector","matches","target","closest","handleMouseOut","relatedTarget","classList","contains","stopPropagation","setHandlerFunction","setTimeout","handleEdit","getPersonAge","regex","birthday","split","test","length","reverse","date","Date","difference","now","getTime","age_dt","Math","abs","getUTCFullYear","Person","handleSelectPerson","picture","dropdownBtnStyle","setDropdownBtnStyle","pictureURL","setPictureURL","parentClass","setParentClass","personAge","setPersonAge","tabindex","setTabindex","err","oldState","onKeyPress","tabIndex","height","width","handleMouseLeave","src","alt","EmptyBox","handleAddPersonUIForLargerScreen","onKeyDown","DeletePersonDialog","setShowDeletePersonDialog","removeItem","deletionUserID","handleDelete","textContent","validatePicture","pictureType","ArrayBuffer","PictureInput","setDidUserUploadPicture","setCurrentPicture","label","focus","htmlFor","click","accept","files","hidden","testDateWithCommonFormat","testDateWithUncommonFormat","validatePersonData","dateValidation","dayValue","slice","dayValidation","monthValue","monthValidation","yearValue","getFullYear","yearValidation","AddPersonUIControls","handleAddPerson","AddPersonUIINfo","nameContainer","dateContainer","maxLength","defaultValue","PersonImgContainer","currentPicture","AddPersonUI","toggleAddPersonUI","didUserUploadPicture","blankImg","validationResult","addPerson","charAt","toUpperCase","newPerson","createNewPerson","toString","EditPersonUIControls","handleAcceptClick","EditPersonUI","defaultState","currentPersonIDForEdit","newName","newBirthday","editedPerson","createEditedPerson","newPeople","Notification","isTimePassed","setIsTimePassed","notificationCallback","notificationContent","reformatDateSeperator","replace","validateAndReformatDate","newPrevBirthday","newCurBirthday","sortingLogic","args","peopleList","nextSort","sortedPeople","sort","prev","cur","prevDay","prevMonth","prevYear","curDay","curMonth","curYear","sortByAge","sortByMonth","prevName","curName","charCodeAt","sortByName","SortingSelectbox","sortingState","sortState","setSortState","formatValue","PersonList","showAddPersonUIState","showAddPersonUI","setShowAddPersonUI","showBackground","showEditPersonUI","showDeletePersonDialog","setDeletionUserID","handleKeyUp","handleResize","isNotificationOpen","removeDataFromIDBStore","map","HomeMain","setShowUI","handleSorting","MobileNav","DarkBackground","body","overflow","PeopleListProvider","React","Provider","getData","notificationContext","reducer","action","AppProvider","useReducer","getInitialData","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6ca0e61c.chunk.js","sourcesContent":["import { createContext } from 'react';\r\nexport const AppContext = createContext(null);\r\n","import { createContext } from 'react';\r\n const PeopleListContext = createContext(null);\r\nexport default PeopleListContext;\r\n","function filterPeopleByName(people, name) {\r\n  const filteredPeople = people.filter((person) => {\r\n    const personName = person.name.toLowerCase();\r\n    name = name.toLowerCase();\r\n    return personName.includes(name);\r\n  });\r\n  return filteredPeople;\r\n}\r\n\r\nexport default filterPeopleByName;\r\n","function filterFavouritePeople(people) {\r\n  return people.filter((person) => person.inFavourites);\r\n}\r\n\r\nexport default filterFavouritePeople;\r\n\r\n","import { useRef, useContext, useEffect } from 'react';\r\nimport './SearchBox.scss';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport PeopleListContext from '../../context/PeopleListContext/PeopleListContext';\r\nimport filterPeopleByName from '../../helper/filterPeopleByName';\r\nimport filterFavouritePeople from '../../helper/filterFavouritePeople';\r\n\r\nfunction SearchBox({ setShowSearchBox }) {\r\n  const { favState, state } = useContext(AppContext);\r\n  const [, setPeopleList] = useContext(PeopleListContext);\r\n  const [showFavourites] = favState;\r\n  const searchInput = useRef(null);\r\n\r\n  const handleChange = async () => {\r\n    const name = searchInput.current.value;\r\n    displayPeople(name);\r\n  };\r\n\r\n  const displayPeople = (name) => {\r\n    let people = showFavourites\r\n      ? filterFavouritePeople(state.people)\r\n      : state.people;\r\n    if (people) {\r\n      const filteredPeople = filterPeopleByName(people, name);\r\n      setPeopleList(filteredPeople);\r\n    } else {\r\n      console.log('Data could not found!');\r\n    }\r\n  };\r\n\r\n  const handleSearchBoxClose = async () => {\r\n    let name = '';\r\n    setShowSearchBox(false);\r\n    displayPeople(name);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === 'Escape') handleSearchBoxClose();\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, []);\r\n  return (\r\n    <div className=\"search-box\">\r\n      <input\r\n        className=\"search-box__search-input\"\r\n        type=\"search\"\r\n        placeholder=\"Search by name\"\r\n        onChange={handleChange}\r\n        ref={searchInput}\r\n        autoFocus\r\n      />\r\n      <button className=\"search-box__close-btn\" onClick={handleSearchBoxClose}>\r\n        <i className=\"far fa-times-circle\"></i>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBox;\r\n","import { useContext, useState } from 'react';\r\nimport './AppHead.scss';\r\nimport SearchBox from '../SearchBox/SearchBox';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nfunction AppHead() {\r\n  const { favState } = useContext(AppContext);\r\n  const [showFavourites, setShowFavourites] = favState;\r\n  const [showSearchBox, setShowSearchBox] = useState(false);\r\n\r\n  return (\r\n    <header className=\"app-head\">\r\n      {/*  <h1 className=\"app-head__logo\">BirthdayApp</h1> */}\r\n      <nav className=\"app-head-nav\">\r\n        {(showSearchBox && (\r\n          <SearchBox setShowSearchBox={setShowSearchBox} />\r\n        )) || (\r\n          <button\r\n            className=\"app-head-nav__search-btn\"\r\n            onClick={() => setShowSearchBox(!showSearchBox)}\r\n          >\r\n            <i className=\"fas fa-search app-head-nav__icon\"></i>\r\n          </button>\r\n        )}\r\n        <button\r\n          className=\"app-head-nav__fav-btn\"\r\n          onClick={() => !setShowFavourites(!showFavourites)}\r\n          style={{\r\n            color: showFavourites ? ' #dcd6f7' : '#c9c2e8',\r\n          }}\r\n        >\r\n          <i className=\"fa fa-star app-head-nav__icon\" aria-hidden=\"true\"></i>\r\n        </button>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHead;\r\n","function createFileURL(file) {\r\n  if (file instanceof File || file instanceof Blob) {\r\n    const url = URL.createObjectURL(file);\r\n    return url;\r\n  } else if (\r\n    typeof file === 'string' &&\r\n    (file.includes('.png') || file.includes('.jpeg') || file.includes('.jpg'))\r\n  )\r\n    return file;\r\n  throw Error(\r\n    'Input must be a File, String (includes .png, .jpeg or .jpg), or Blob object.'\r\n  );\r\n}\r\n\r\nexport default createFileURL;\r\n","function findPersonByID(people, id) {\r\n  return people.find((person) => person.id === id);\r\n}\r\n\r\nexport default findPersonByID;\r\n","import { openDB } from 'idb';\r\nasync function accesDB(database, version) {\r\n  let myDB = null;\r\n  try {\r\n    myDB = await openDB(database, version, {\r\n      upgrade(database, oldVersion, newVersion, transaction) {\r\n        database.createObjectStore('people', { keyPath: 'id' });\r\n      },\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    return;\r\n  }\r\n\r\n  return myDB;\r\n}\r\n\r\nasync function getIDBStore(database, version, store) {\r\n  let myDB = null;\r\n  try {\r\n    myDB = await accesDB(database, version);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  const tx = myDB.transaction(store, 'readwrite');\r\n  const myStore = tx.objectStore(store);\r\n  return myStore;\r\n}\r\n\r\nexport { accesDB, getIDBStore };\r\n","import { getIDBStore } from './indexedDBValidation';\r\nasync function putItemToIDB(item, database, version, store) {\r\n  try {\r\n    const accessedStore = await getIDBStore(database, version, store);\r\n    await accessedStore.put(item);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nasync function getDataFromIDBStore(database, version, store) {\r\n  try {\r\n    const accessedStore = await getIDBStore(database, version, store);\r\n    const data = await accessedStore.getAll();\r\n    return data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\n async function removeDataFromIDBStore(database, version, store, key) {\r\n  try {\r\n    const accessedStore = await getIDBStore(database, version, store);\r\n    accessedStore.delete(key);\r\n  }\r\n  catch (err) {\r\n    console.log(err);\r\n  }\r\n} \r\n\r\nfunction arrayBufferToBlob(buffer, type) {\r\n  return new Blob([buffer], { type: type });\r\n}\r\n\r\nfunction blobToArrayBuffer(blob) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('loadend', (e) => {\r\n      resolve(reader.result);\r\n    });\r\n    reader.addEventListener('error', reject);\r\n    reader.readAsArrayBuffer(blob);\r\n  });\r\n}\r\n\r\nexport { putItemToIDB, getDataFromIDBStore, removeDataFromIDBStore, blobToArrayBuffer, arrayBufferToBlob };\r\n","import './PersonOptions.scss';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport findPersonByID from '../../helper/findPersonByID';\r\nimport { putItemToIDB } from '../../utils/IndexedDB/indexedDBManagement';\r\n\r\nfunction PersonOptions(props) {\r\n  const { currentPersonID, setCurrentPersonID, handleDeletePerson } = props;\r\n  const {\r\n    state,\r\n    dispatch,\r\n    backgroundState,\r\n    showEditPersonUIState,\r\n  } = useContext(AppContext);\r\n  const person = findPersonByID(state.people, currentPersonID);\r\n  const [, setShowBackground] = backgroundState;\r\n  const [, setShowEditPersonUI] = showEditPersonUIState;\r\n  const [favText, setFavText] = useState('');\r\n\r\n  const isPersonInFavourites = (person) => {\r\n    return person && person.inFavourites;\r\n  };\r\n\r\n  const handleEdit = (e) => {\r\n    e.stopPropagation();\r\n    setShowBackground(true);\r\n    setShowEditPersonUI(true);\r\n    setTimeout(() => setCurrentPersonID(null), 0);\r\n  };\r\n\r\n  const handleAddFavourites = () => {\r\n    const oldPeople = state.people.filter(\r\n      (person) => currentPersonID !== person.id\r\n    );\r\n    const modifiedPerson = {\r\n      ...person,\r\n      inFavourites: true,\r\n    };\r\n\r\n    dispatch({\r\n      type: 'ADD_FAVOURITE',\r\n      payload: {\r\n        people: [...oldPeople, modifiedPerson],\r\n        name: modifiedPerson.name,\r\n      },\r\n    });\r\n    putItemToIDB(modifiedPerson, 'userDatabase', '1', 'people');\r\n    setCurrentPersonID(null);\r\n  };\r\n\r\n  const handleRemoveFavourites = () => {\r\n    const oldPeople = state.people.filter(\r\n      (person) => person.id !== currentPersonID\r\n    );\r\n    const modifiedPerson = {\r\n      ...person,\r\n      inFavourites: false,\r\n    };\r\n    dispatch({\r\n      type: 'REMOVE_FAVOURITE',\r\n      payload: {\r\n        people: [...oldPeople, modifiedPerson],\r\n        name: modifiedPerson.name,\r\n      },\r\n    });\r\n    setCurrentPersonID(null);\r\n  };\r\n\r\n  const setHandlerFunction = (e) => {\r\n    e.stopPropagation();\r\n    setShowBackground(false);\r\n    return isPersonInFavourites(person)\r\n      ? handleRemoveFavourites\r\n      : handleAddFavourites;\r\n  };\r\n\r\n  const handleMouseOver = (e) => {\r\n    const mql = window.matchMedia('(min-width: 769px)');\r\n    const dropDownBtn = document.querySelector(\".person__dropdown-btn\");\r\n    if (mql.matches) {\r\n      const target = e.target.closest('div');\r\n      const handleMouseOut = (e) => {\r\n        setShowBackground(false);\r\n        const relatedTarget = e.relatedTarget;\r\n        if (\r\n          relatedTarget &&\r\n          !relatedTarget.classList.contains('person__dropdown-btn')\r\n        ) {\r\n          dropDownBtn.style = {};\r\n          setCurrentPersonID(null);\r\n          target.removeEventListener('mouseleave', handleMouseOut);\r\n        }\r\n      };\r\n      target.addEventListener('mouseleave', handleMouseOut);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    isPersonInFavourites(person)\r\n      ? setFavText('Remove from favourites')\r\n      : setFavText('Add to favourites');\r\n  }, [person]);\r\n\r\n  return (\r\n    <div className=\"person-options-container\" onMouseEnter={handleMouseOver}>\r\n      <p className=\"person-options-container__name\">\r\n        Person: {person && person.name}\r\n      </p>\r\n      <ul className=\"person-options-list\">\r\n        <li className=\"person-options-list__item person-options-list__item--triangled\">\r\n          <button\r\n            className=\"person-options-list__btn\"\r\n            onClick={(e) => setHandlerFunction(e)()}\r\n          >\r\n            {favText}\r\n          </button>\r\n        </li>\r\n        <li className=\"person-options-list__item person-options-list__item--edit-btn\">\r\n          <button\r\n            className=\"person-options-list__btn\"\r\n            onClick={(e) => handleEdit(e)}\r\n          >\r\n            Edit\r\n          </button>\r\n        </li>\r\n        <li className=\"person-options-list__item person-options-list__item--delete-btn\">\r\n          <button\r\n            className=\"person-options-list__btn\"\r\n            onClick={(e) => handleDeletePerson(e, currentPersonID)}\r\n          >\r\n            Delete\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonOptions;\r\n","function getPersonAge(person) {\r\n  const regex = /(\\.|-|\\/)/;\r\n  let birthday = person.birthday\r\n    .split(regex)\r\n    .filter((item) => !regex.test(item));\r\n  if (birthday[0].length !== 4) {\r\n    birthday = birthday.reverse();\r\n  }\r\n  // Creates Date object with year, month and day values.\r\n  const date = new Date(birthday[0], birthday[1], birthday[2]);\r\n  var difference = Date.now() - date.getTime();\r\n  var age_dt = new Date(difference);\r\n  return Math.abs(age_dt.getUTCFullYear() - 1970);\r\n}\r\n\r\nexport default getPersonAge;\r\n","import './Person.scss';\r\nimport createFileURL from '../../helper//createFileURL';\r\nimport PersonOptions from '../PersonOptions/PersonOptions';\r\nimport { arrayBufferToBlob } from '../../utils/IndexedDB/indexedDBManagement';\r\nimport { useEffect, useState } from 'react';\r\nimport getPersonAge from '../../helper/getPersonAge';\r\nfunction Person(props) {\r\n  const {\r\n    person,\r\n    handleDeletePerson,\r\n    currentPersonID,\r\n    setCurrentPersonID,\r\n    handleSelectPerson,\r\n  } = props;\r\n  const { id, name, birthday, picture } = person;\r\n  const [dropdownBtnStyle, setDropdownBtnStyle] = useState(null);\r\n  const [pictureURL, setPictureURL] = useState(null);\r\n  const [parentClass, setParentClass] = useState('');\r\n  const [personAge, setPersonAge] = useState(null);\r\n  const [tabindex, setTabindex] = useState(-1);\r\n  useEffect(() => {\r\n    let pictureURL = null;\r\n    try {\r\n      if (typeof picture !== 'string') {\r\n        const blob = arrayBufferToBlob(picture);\r\n        pictureURL = createFileURL(blob);\r\n      } else {\r\n        pictureURL = picture;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    setPictureURL((oldState) => (oldState = pictureURL));\r\n  }, [picture]);\r\n\r\n  useEffect(() => {\r\n    let parentClassName =\r\n      currentPersonID === id ? 'person person--highlighted' : 'person';\r\n    setParentClass(parentClassName);\r\n  }, [currentPersonID, id]);\r\n\r\n  useEffect(() => {\r\n    setPersonAge(getPersonAge(person));\r\n  }, [person]);\r\n\r\n  useEffect(() => {\r\n    const mql = window.matchMedia('(max-width: 769px)');\r\n    if (mql.matches) setTabindex(0);\r\n  }, [tabindex]);\r\n\r\n  const handleClick = () => {\r\n    const mql = window.matchMedia('(max-width: 769px)');\r\n    if (mql.matches) handleSelectPerson(id);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') handleSelectPerson(id);\r\n  };\r\n  const handleMouseEnter = (e) => {\r\n    const target = e.target.closest('button');\r\n    handleSelectPerson(id);\r\n    const style = { height: '50px', width: '30px' };\r\n    setDropdownBtnStyle(style);\r\n    const handleMouseLeave = (e) => {\r\n      const relatedTarget = e.relatedTarget;\r\n      if (\r\n        relatedTarget &&\r\n        !relatedTarget.classList.contains('person-options-list__item')\r\n      ) {\r\n        setCurrentPersonID(null);\r\n        setDropdownBtnStyle(null);\r\n        target.removeEventListener('mouseleave', handleMouseLeave);\r\n      }\r\n    };\r\n    target.addEventListener('mouseleave', handleMouseLeave);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={parentClass}\r\n      onKeyPress={handleKeyPress}\r\n      onClick={handleClick}\r\n      tabIndex={tabindex}\r\n    >\r\n      <button\r\n        className=\"person__dropdown-btn\"\r\n        onMouseEnter={handleMouseEnter}\r\n        style={dropdownBtnStyle}\r\n      >\r\n        <i className=\"fa fa-ellipsis-h\" aria-hidden=\"true\"></i>\r\n      </button>\r\n      {currentPersonID === id && (\r\n        <PersonOptions\r\n          currentPersonID={currentPersonID}\r\n          setCurrentPersonID={setCurrentPersonID}\r\n          handleDeletePerson={handleDeletePerson}\r\n        />\r\n      )}\r\n      <div className=\"person-img-container\">\r\n        <img\r\n          className=\"person-img-container__img\"\r\n          src={pictureURL}\r\n          alt={name}\r\n        />\r\n      </div>\r\n      <div className=\"person-info\">\r\n        <p className=\"person-info__name\">{name}</p>\r\n        <p className=\"person-info__birthday\">{birthday}</p>\r\n      </div>\r\n      <div className=\"person-age-container\">\r\n        <p className=\"person-age-container__title\">Age:</p>\r\n        <p className=\"person-age-container__age\">{personAge}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Person;\r\n","import './EmptyBox.scss';\r\nfunction EmptyBox({ handleAddPersonUIForLargerScreen }) {\r\n  const handleClick = (e) => {\r\n    handleAddPersonUIForLargerScreen(e);\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') handleAddPersonUIForLargerScreen(e);\r\n  };\r\n  return (\r\n    <div\r\n      className=\"empty-box\"\r\n      tabIndex={0}\r\n      onClick={handleClick}\r\n      onKeyDown={handleKeyDown}\r\n    >\r\n      <div className=\"empty-box__icon-container\">\r\n        <i className=\"fa fa-plus empty-box__add-icon\" aria-hidden=\"true\"></i>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmptyBox;\r\n","import { useContext } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport findPersonByID from '../../helper/findPersonByID';\r\nimport './DeletePersonDialog.scss';\r\nfunction DeletePersonDialog(props) {\r\n  const {\r\n    setShowDeletePersonDialog,\r\n    removeItem,\r\n    deletionUserID,\r\n    setCurrentPersonID,\r\n  } = props;\r\n  const { backgroundState, state } = useContext(AppContext);\r\n  const [, setShowBackground] = backgroundState;\r\n  const handleDelete = (e) => {\r\n    e.stopPropagation();\r\n    const btnText = e.target.textContent;\r\n    if (btnText === 'Yes') {\r\n      removeItem(deletionUserID);\r\n    }\r\n\r\n    setShowDeletePersonDialog(false);\r\n    setShowBackground(false);\r\n    setCurrentPersonID(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"delete-person-dialog\">\r\n      <p className=\"delete-person-dialog__text\">\r\n        {` Are you really want to delete ${\r\n          findPersonByID(state.people, deletionUserID).name\r\n        }?`}\r\n      </p>\r\n      <div className=\"delete-person-dialog-controls\">\r\n        <button\r\n          className=\"delete-person-dialog-controls__btn\"\r\n          onClick={handleDelete}\r\n          autoFocus\r\n        >\r\n          Yes\r\n        </button>\r\n        <button\r\n          className=\"delete-person-dialog-controls__btn delete-person-dialog-controls__btn--no-margin\"\r\n          onClick={handleDelete}\r\n        >\r\n          No\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeletePersonDialog;\r\n","export default __webpack_public_path__ + \"static/media/no-picture.2fda6558.png\";","const validatePicture = (picture) => {\r\n  try {\r\n    if (typeof picture === 'string') return true;\r\n    const pictureType = picture.type;\r\n    return (\r\n      // If user doesn't choose any picture, picture will be \"no-picture.png\" (URL as string).\r\n      pictureType === 'image/jpeg' || pictureType === 'image/png' || picture instanceof ArrayBuffer\r\n    );\r\n  } catch (err) {\r\n    console.log(err);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default validatePicture;\r\n","import { useContext, useEffect, useRef } from 'react';\r\nimport validatePicture from '../../helper/validatePicture';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport './PictureInput.scss';\r\nfunction PictureInput({ setDidUserUploadPicture, setCurrentPicture }) {\r\n  const { dispatch } = useContext(AppContext);\r\n  const label = useRef(null);\r\n  const handleFile = (e) => {\r\n    const picture = e.target.files[0];\r\n    if (validatePicture(picture)) {\r\n      setDidUserUploadPicture(true);\r\n      setCurrentPicture(picture);\r\n    } else {\r\n      dispatch({ type: 'INVALID_FILE_TYPE' });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    label.current.focus();\r\n  }, []);\r\n\r\n  const onKeyDown = (e) => {\r\n    if (e.key === 'Enter') label.current.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"picture-input-container\">\r\n      <label\r\n        htmlFor=\"picture\"\r\n        className=\"picture-input-container__label\"\r\n        tabIndex={0}\r\n        ref={label}\r\n        onKeyDown={onKeyDown}\r\n      >\r\n        <i\r\n          className=\"fas fa-camera picture-input-container__icon\"\r\n          aria-hidden={true}\r\n        ></i>\r\n      </label>\r\n      <input\r\n        id=\"picture\"\r\n        type=\"file\"\r\n        className=\"picture-input-container__picture\"\r\n        accept=\"image/png, image/jpeg\"\r\n        onChange={handleFile}\r\n        hidden={true}\r\n      ></input>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PictureInput;\r\n","function testDateWithCommonFormat(date) {\r\n  const regex = /(\\d\\d)(\\.|-|\\/)(\\d\\d)(\\.|-|\\/)(\\d\\d\\d\\d)/;\r\n  const result = regex.test(date);\r\n  return { result, regex };\r\n}\r\n\r\nfunction testDateWithUncommonFormat(date) {\r\n  const regex = /(\\d\\d\\d\\d)(\\.|-|\\/)(\\d\\d)(\\.|-|\\/)(\\d\\d)/;\r\n  const result = regex.test(date);\r\n  return { result, regex };\r\n}\r\n\r\nexport { testDateWithCommonFormat, testDateWithUncommonFormat };\r\n","import { testDateWithCommonFormat, testDateWithUncommonFormat } from './dateFormatValidations';\r\nimport { dayValidation, monthValidation, yearValidation } from './dateValueValidations';\r\nimport validatePicture from './validatePicture';\r\n\r\nconst validatePersonData = (name, date, picture) => {\r\n  if (name.length <= 0) return 'INVALID_NAME';\r\n  else if (!dateValidation(date)) return 'INVALID_DATE';\r\n  else if (!dayValidation(date)) return 'INVALID_DAY';\r\n  else if (!monthValidation(date)) return 'INVALID_MONTH';\r\n  else if (!yearValidation(date)) return 'INVALID_YEAR';\r\n  else if (!validatePicture(picture)) return 'INVALID_FILE_TYPE';\r\n  return true;\r\n};\r\n\r\nfunction dateValidation(date) {\r\n  return testDateWithCommonFormat(date).result || testDateWithUncommonFormat(date).result;\r\n}\r\n\r\n\r\nexport default validatePersonData;\r\n","import { testDateWithCommonFormat } from './dateFormatValidations';\r\n\r\nfunction dayValidation(date) {\r\n  const { result } = testDateWithCommonFormat(date);\r\n  const dayValue = result ? +date.slice(0, 2) : +date.slice(-2);\r\n  return dayValue <= 31 && dayValue > 0;\r\n}\r\n\r\nfunction monthValidation(date) {\r\n  const { result } = testDateWithCommonFormat(date);\r\n  const monthValue = result ? +date.slice(3, 5) : +date.slice(5, 7);\r\n  return monthValue <= 12 && monthValue > 0;\r\n}\r\n\r\nfunction yearValidation(date) {\r\n  const { result } = testDateWithCommonFormat(date);\r\n  const yearValue = result ? +date.slice(-4) : +date.slice(0, 4);\r\n  const currentYear = new Date().getFullYear();\r\n  return yearValue <= currentYear && yearValue > 1000;\r\n}\r\n\r\nexport { dayValidation, monthValidation, yearValidation };\r\n","import './AddPersonUIControls.scss';\r\nfunction AddPersonUIControls({ handleAddPerson }) {\r\n  return (\r\n    <div className=\"add-person-ui-controls\">\r\n      <button\r\n        className=\"add-person-ui-controls__add-btn\"\r\n        onClick={() => {\r\n          handleAddPerson();\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-plus-circle add-person-ui-controls__icon\"\r\n          aria-hidden=\"true\"\r\n        ></i>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddPersonUIControls;\r\n","import './AddPersonUIInfo.scss';\r\n\r\nfunction AddPersonUIINfo(props) {\r\n  const { nameContainer, dateContainer, name, birthday } = props;\r\n\r\n  return (\r\n    <div className=\"add-person-ui-info-container\">\r\n      <input\r\n        type=\"text\"\r\n        className=\"add-person-ui-info-container__name\"\r\n        ref={nameContainer}\r\n        maxLength=\"15\"\r\n        placeholder=\"Name\"\r\n        defaultValue={name || ''}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        className=\"add-person-ui-info-container__birthday\"\r\n        ref={dateContainer}\r\n        defaultValue={birthday || ''}\r\n        maxLength=\"10\"\r\n        placeholder=\"dd/mm/yyyy\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddPersonUIINfo;\r\n","import './PersonImgContainer.scss';\r\nfunction PersonImgContainer({ createFileURL, currentPicture, nameContainer }) {\r\n  return (\r\n    <div className=\"person-img-container\">\r\n      <img\r\n        className=\"person-img-container__img\"\r\n        src={createFileURL(currentPicture)}\r\n        alt={nameContainer.current.value}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonImgContainer;\r\n","import { useContext, useRef, useState } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport './AddPersonUI.scss';\r\nimport blankImg from '../../assets/no-picture.png';\r\nimport {\r\n  putItemToIDB,\r\n  blobToArrayBuffer,\r\n} from '../../utils/IndexedDB/indexedDBManagement';\r\nimport PictureInput from '../PictureInput/PictureInput';\r\nimport createFileURL from '../../helper/createFileURL';\r\nimport validatePersonData from '../../helper/validatePersonData';\r\nimport AddPersonUIControls from '../AddPersonUIControls/AddPersonUIControls';\r\nimport AddPersonUIINfo from '../AddPersonUIInfo/AddPersonUIInfo';\r\nimport PersonImgContainer from '../PersonImgContainer/PersonImgContainer';\r\nfunction AddPersonUI({ setShowBackground, toggleAddPersonUI }) {\r\n  const { state, dispatch } = useContext(AppContext);\r\n  const [didUserUploadPicture, setDidUserUploadPicture] = useState(false);\r\n  const [currentPicture, setCurrentPicture] = useState(null);\r\n  const nameContainer = useRef(null);\r\n  const dateContainer = useRef(null);\r\n  const handleAddPerson = async () => {\r\n    let name = nameContainer.current.value;\r\n    const date = dateContainer.current.value;\r\n    let picture = currentPicture\r\n      ? await blobToArrayBuffer(currentPicture)\r\n      : blankImg;\r\n    const validationResult = validatePersonData(name, date, picture);\r\n    switch (validationResult) {\r\n      case 'INVALID_NAME':\r\n      case 'INVALID_DATE':\r\n      case 'INVALID_DAY':\r\n      case 'INVALID_MONTH':\r\n      case 'INVALID_YEAR':\r\n      case 'INVALID_FILE_TYPE':\r\n        dispatch({ type: validationResult });\r\n        break;\r\n      default:\r\n        addPerson(name, date, picture);\r\n        toggleAddPersonUI();\r\n        setShowBackground(false);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const addPerson = (name, birthday, picture) => {\r\n    name = name.charAt(0).toUpperCase() + name.slice(1);\r\n    const newPerson = createNewPerson(name, birthday, picture);\r\n    dispatch({ type: 'ADD_PERSON', payload: [...state.people, newPerson] });\r\n    putItemToIDB(newPerson, 'userDatabase', '1', 'people');\r\n  };\r\n\r\n  const createNewPerson = (name, birthday, picture) => {\r\n    const newPerson = {\r\n      id: new Date().getTime().toString(),\r\n      name: name,\r\n      birthday: birthday,\r\n      picture: picture,\r\n      inFavourites: false,\r\n    };\r\n    return newPerson;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"add-person-ui\">\r\n        {didUserUploadPicture ? (\r\n          <PersonImgContainer\r\n            createFileURL={createFileURL}\r\n            currentPicture={currentPicture}\r\n            nameContainer={nameContainer}\r\n          />\r\n        ) : (\r\n          <PictureInput\r\n            setDidUserUploadPicture={setDidUserUploadPicture}\r\n            currentPicture={currentPicture}\r\n            setCurrentPicture={setCurrentPicture}\r\n          />\r\n        )}\r\n        <AddPersonUIINfo\r\n          nameContainer={nameContainer}\r\n          dateContainer={dateContainer}\r\n        />\r\n        <AddPersonUIControls handleAddPerson={handleAddPerson} />\r\n        <button\r\n          className=\"add-person-ui__close-btn\"\r\n          onClick={toggleAddPersonUI}\r\n        >\r\n          <i className=\"fas fa-times\"></i>\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddPersonUI;\r\n","import './EditPersonUIControls.scss';\r\nfunction EditPersonUIControls({ handleAcceptClick }) {\r\n  return (\r\n    <div className=\"edit-person-ui-controls\">\r\n      <button\r\n        className=\"edit-person-ui-controls__accept-btn\"\r\n        onClick={(e)=>handleAcceptClick(e)}\r\n      >\r\n        <i\r\n          className=\"fas fa-check-circle edit-person-ui-controls__icon\"\r\n          aria-hidden={true}\r\n        ></i>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditPersonUIControls;\r\n","import AddPersonUIInfo from '../AddPersonUIInfo/AddPersonUIInfo';\r\nimport EditPersonUIControls from '../EditPersonUIControls/EditPersonUIControls';\r\nimport PictureInput from '../PictureInput/PictureInput';\r\nimport { useContext, useEffect, useRef, useState } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport findPersonByID from '../../helper/findPersonByID';\r\nimport './EditPersonUI.scss';\r\nimport {\r\n  blobToArrayBuffer,\r\n  putItemToIDB,\r\n} from '../../utils/IndexedDB/indexedDBManagement';\r\nimport blankImg from '../../assets/no-picture.png';\r\nimport PersonImgContainer from '../PersonImgContainer/PersonImgContainer';\r\nimport createFileURL from '../../helper/createFileURL';\r\nimport validatePersonData from '../../helper/validatePersonData';\r\nfunction EditPersonUI({\r\n  currentPersonID,\r\n  setShowEditPersonUI,\r\n  setShowBackground,\r\n}) {\r\n  const defaultState = currentPersonID;\r\n  const nameContainer = useRef(null);\r\n  const dateContainer = useRef(null);\r\n  const { state, dispatch } = useContext(AppContext);\r\n  const [currentPersonIDForEdit] = useState(defaultState);\r\n  const [currentPicture, setCurrentPicture] = useState(null);\r\n  const [didUserUploadPicture, setDidUserUploadPicture] = useState(false);\r\n  const person = findPersonByID(state.people, currentPersonIDForEdit);\r\n  const handleAcceptClick = async (e) => {\r\n    e.stopPropagation();\r\n    const newName = nameContainer.current.value;\r\n    const newBirthday = dateContainer.current.value;\r\n    const picture = didUserUploadPicture ? currentPicture : person.picture;\r\n    let editedPerson = null;\r\n    try {\r\n      editedPerson = await createEditedPerson(newName, newBirthday, picture);\r\n    } catch (err) {\r\n      // Add notification.\r\n      console.log(err);\r\n    }\r\n    if (editedPerson) {\r\n      const filteredPeople = state.people.filter(\r\n        (person) => person.id !== currentPersonIDForEdit\r\n      );\r\n\r\n      const newPeople = [...filteredPeople, editedPerson];\r\n      putItemToIDB(editedPerson, 'userDatabase', '1', 'people');\r\n      dispatch({\r\n        type: 'EDIT_PERSON',\r\n        payload: {\r\n          people: newPeople,\r\n          name: editedPerson.name,\r\n        },\r\n      });\r\n      setShowBackground(false);\r\n      setShowEditPersonUI(false);\r\n    } else {\r\n      // !!! Add notification\r\n      console.log('EDIT PERSON ERROR!');\r\n    }\r\n  };\r\n\r\n  const createEditedPerson = async (name, birthday, picture) => {\r\n    const editedPerson = {\r\n      ...person,\r\n      id: currentPersonIDForEdit,\r\n      name: name,\r\n      birthday: birthday,\r\n      picture: picture,\r\n    };\r\n    picture = currentPicture\r\n      ? await blobToArrayBuffer(currentPicture)\r\n      : blankImg;\r\n    const validationResult = validatePersonData(name, birthday, picture);\r\n    switch (validationResult) {\r\n      case 'INVALID_NAME':\r\n      case 'INVALID_DATE':\r\n      case 'INVALID_DAY':\r\n      case 'INVALID_MONTH':\r\n      case 'INVALID_YEAR':\r\n      case 'INVALID_FILE_TYPE':\r\n        dispatch({ type: validationResult });\r\n        break;\r\n      default:\r\n        return editedPerson;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === 'Escape') setShowEditPersonUI(false);\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [setShowEditPersonUI]);\r\n\r\n  return (\r\n    <div className=\"edit-person-ui\">\r\n      {didUserUploadPicture ? (\r\n        <PersonImgContainer\r\n          createFileURL={createFileURL}\r\n          currentPicture={currentPicture}\r\n          nameContainer={nameContainer}\r\n        />\r\n      ) : (\r\n        <PictureInput\r\n          setDidUserUploadPicture={setDidUserUploadPicture}\r\n          currentPicture={currentPicture}\r\n          setCurrentPicture={setCurrentPicture}\r\n        />\r\n      )}\r\n\r\n      <AddPersonUIInfo\r\n        name={person.name}\r\n        birthday={person.birthday}\r\n        currentPersonID={currentPersonID}\r\n        nameContainer={nameContainer}\r\n        dateContainer={dateContainer}\r\n      />\r\n      <EditPersonUIControls handleAcceptClick={handleAcceptClick} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditPersonUI;\r\n","import { useContext, useEffect } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport './Notification.scss';\r\n\r\nfunction Notification({ isTimePassed, setIsTimePassed }) {\r\n  const { state, dispatch } = useContext(AppContext);\r\n\r\n  const clearNotification = () => {\r\n    dispatch({ type: 'REMOVE_MODAL' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isTimePassed) {\r\n      setIsTimePassed(false);\r\n      setTimeout(notificationCallback, 2500);\r\n    }\r\n  });\r\n  const notificationCallback = () => {\r\n    clearNotification();\r\n    setIsTimePassed(true);\r\n  };\r\n  return <p className=\"notification\">{state.notificationContent}</p>;\r\n}\r\n\r\nexport default Notification;\r\n","function reformatDateSeperator(date) {\r\n  return date.replace(/(\\.|-|\\/)/g, '.');\r\n}\r\n\r\nexport default reformatDateSeperator;\r\n","import {\r\n  testDateWithCommonFormat,\r\n  testDateWithUncommonFormat,\r\n} from './dateFormatValidations';\r\nimport reformatDateSeperator from './reformatDate';\r\n\r\nfunction sortingLogic(args) {\r\n  const {\r\n    peopleList,\r\n    dispatch,\r\n    nextSort,\r\n    setPeopleList,\r\n    showFavourites,\r\n  } = args;\r\n  const people = peopleList;\r\n  if (nextSort === 'sortByAge') {\r\n    sortByAge(people, dispatch, setPeopleList, showFavourites);\r\n  } else if (nextSort === 'sortByMonth') {\r\n    sortByMonth(people, dispatch, setPeopleList, showFavourites);\r\n  } else if (nextSort === 'sortByName') {\r\n    sortByName(people, dispatch, setPeopleList, showFavourites);\r\n  }\r\n}\r\n\r\n// People sorting could be merged into a single function in the future.\r\nfunction sortByAge(oldPeople, dispatch, setPeopleList, showFavourites) {\r\n  const sortedPeople = oldPeople.sort((prev, cur) => {\r\n    let newPrevBirthday = prev.birthday.slice();\r\n    let newCurBirthday = cur.birthday.slice();\r\n    [newPrevBirthday, newCurBirthday] = validateAndReformatDate(\r\n      newPrevBirthday,\r\n      newCurBirthday\r\n    );\r\n    const [prevDay, prevMonth, prevYear] = newPrevBirthday.split('.');\r\n    const [curDay, curMonth, curYear] = newCurBirthday.split('.');\r\n    const prevDateInMs = new Date(prevYear, prevMonth, prevDay).getTime();\r\n    const curDateInMs = new Date(curYear, curMonth, curDay).getTime();\r\n    return prevDateInMs - curDateInMs;\r\n  });\r\n  if (showFavourites) {\r\n    const favouritePeople = sortedPeople.filter(\r\n      (person) => person.inFavourites\r\n    );\r\n    setPeopleList(favouritePeople);\r\n  } else {\r\n    setPeopleList(sortedPeople);\r\n  }\r\n  dispatch({ type: 'SORT_PEOPLE_BY_AGE' });\r\n}\r\n\r\nfunction sortByMonth(oldPeople, dispatch, setPeopleList, showFavourites) {\r\n  const sortedPeople = oldPeople.sort((prev, cur) => {\r\n    let newPrevBirthday = prev.birthday.slice();\r\n    let newCurBirthday = cur.birthday.slice();\r\n    [newPrevBirthday, newCurBirthday] = validateAndReformatDate(\r\n      newPrevBirthday,\r\n      newCurBirthday\r\n    );\r\n    const [prevDay, prevMonth] = newPrevBirthday.split('.');\r\n    const [curDay, curMonth] = newCurBirthday.split('.');\r\n    const prevDatePoint = +prevDay + +prevMonth * 10;\r\n    const curDatePoint = +curDay + +curMonth * 10;\r\n    return curDatePoint - prevDatePoint;\r\n  });\r\n  if (showFavourites) {\r\n    const favouritePeople = sortedPeople.filter(\r\n      (person) => person.inFavourites\r\n    );\r\n    setPeopleList(favouritePeople);\r\n  } else {\r\n    setPeopleList(sortedPeople);\r\n  }\r\n  dispatch({ type: 'SORT_PEOPLE_BY_MONTH' });\r\n}\r\n\r\nfunction sortByName(oldPeople, dispatch, setPeopleList, showFavourites) {\r\n  const sortedPeople = oldPeople.sort((prev, cur) => {\r\n    const [prevName] = prev.name.toLowerCase();\r\n    const [curName] = cur.name.toLowerCase();\r\n    return prevName.charCodeAt(0) - curName.charCodeAt(0);\r\n  });\r\n  if (showFavourites) {\r\n    const favouritePeople = sortedPeople.filter(\r\n      (person) => person.inFavourites\r\n    );\r\n    setPeopleList(favouritePeople);\r\n  } else {\r\n    setPeopleList(sortedPeople);\r\n  }\r\n  dispatch({ type: 'SORT_PEOPLE_BY_NAME' });\r\n}\r\n\r\nfunction validateAndReformatDate(newPrevBirthday, newCurBirthday) {\r\n  const { regex } = testDateWithUncommonFormat(newPrevBirthday);\r\n\r\n  newPrevBirthday = testDateWithCommonFormat(newPrevBirthday).result\r\n    ? newPrevBirthday\r\n    : newPrevBirthday.replace(regex, '$5.$3.$1');\r\n\r\n  newCurBirthday = testDateWithCommonFormat(newCurBirthday).result\r\n    ? newCurBirthday\r\n    : newCurBirthday.replace(regex, '$5.$3.$1');\r\n\r\n  if (/-|\\//.test(newPrevBirthday)) {\r\n    newPrevBirthday = reformatDateSeperator(newPrevBirthday);\r\n  }\r\n  if (/-|\\//.test(newCurBirthday)) {\r\n    newCurBirthday = reformatDateSeperator(newCurBirthday);\r\n  }\r\n  return [newPrevBirthday, newCurBirthday];\r\n}\r\n\r\nexport default sortingLogic;\r\n","import React, { useContext } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport PeopleListContext from '../../context/PeopleListContext/PeopleListContext';\r\nimport sortingLogic from '../../helper/sortingLogic';\r\nimport './SortingSelectbox.scss';\r\nfunction SortingSelectbox() {\r\n  const { dispatch, favState, sortingState } = useContext(AppContext);\r\n  const [peopleList, setPeopleList] = useContext(PeopleListContext);\r\n  const [showFavourites] = favState;\r\n  const [sortState, setSortState] = sortingState;\r\n\r\n  const handleChange = (e) => {\r\n    const value = e.target.value;\r\n    const nextSort = formatValue(value);\r\n\r\n    const args = {\r\n      peopleList,\r\n      setPeopleList,\r\n      nextSort,\r\n      showFavourites,\r\n      dispatch,\r\n    };\r\n    sortingLogic(args);\r\n    setSortState(nextSort);\r\n  };\r\n\r\n\r\n\r\n  const formatValue = (value) => {\r\n    switch (value) {\r\n      case 'sort-by-name':\r\n        return 'sortByName';\r\n      case 'sort-by-age':\r\n        return 'sortByAge';\r\n      case 'sort-by-month':\r\n        return 'sortByMonth';\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  return (\r\n    <select className=\"sorting-selectbox\" onChange={handleChange} defaultValue={sortState}>\r\n      <option\r\n        id=\"test\"\r\n        value=\"sort-by-name\"\r\n        className=\"sorting-selectbox__option\"\r\n      >\r\n        Sort by name\r\n      </option>\r\n      <option value=\"sort-by-age\" className=\"sorting-selectbox__option\">\r\n        Sort by age\r\n      </option>\r\n      <option value=\"sort-by-month\" className=\"sorting-selectbox__option\">\r\n        Sort by month\r\n      </option>\r\n    </select>\r\n  );\r\n}\r\n\r\nexport default SortingSelectbox;\r\n","import { useContext, useState, useEffect } from 'react';\r\nimport './PersonList.scss';\r\nimport Person from '../Person/Person';\r\nimport EmptyBox from '../EmptyBox/EmptyBox';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport PeopleListContext from '../../context/PeopleListContext/PeopleListContext';\r\nimport DeletePersonDialog from '../DeletePersonDialog/DeletePersonDialog';\r\nimport { removeDataFromIDBStore } from '../../utils/IndexedDB/indexedDBManagement';\r\nimport AddPersonUI from '../AddPersonUI/AddPersonUI';\r\nimport EditPersonUI from '../EditPersonUI/EditPersonUI';\r\nimport Notification from '../Notification/Notification';\r\nimport filterFavouritePeople from '../../helper/filterFavouritePeople';\r\nimport SortingSelectbox from '../SortingSelectbox/SortingSelectbox';\r\n\r\nfunction PersonList(props) {\r\n  const { currentPersonID, setCurrentPersonID } = props;\r\n  const {\r\n    state,\r\n    dispatch,\r\n    favState,\r\n    backgroundState,\r\n    showEditPersonUIState,\r\n    showAddPersonUIState,\r\n  } = useContext(AppContext);\r\n  const [peopleList, setPeopleList] = useContext(PeopleListContext);\r\n  const [showAddPersonUI, setShowAddPersonUI] = showAddPersonUIState;\r\n  const [showFavourites] = favState;\r\n  const [showBackground, setShowBackground] = backgroundState;\r\n  const [showEditPersonUI, setShowEditPersonUI] = showEditPersonUIState;\r\n  const [showDeletePersonDialog, setShowDeletePersonDialog] = useState(false);\r\n  const [deletionUserID, setDeletionUserID] = useState(null);\r\n  const [isTimePassed, setIsTimePassed] = useState(true);\r\n  const handleDeletePerson = (e, id) => {\r\n    const mql = window.matchMedia('(min-width: 768px)');\r\n    if (mql.matches) {\r\n      setCurrentPersonID(null);\r\n    }\r\n    e.stopPropagation();\r\n    setShowDeletePersonDialog(true);\r\n    setDeletionUserID(id);\r\n  };\r\n  const toggleAddPersonUI = () => {\r\n    setShowAddPersonUI(() => !showAddPersonUI);\r\n  };\r\n\r\n  const removeItem = (id) => {\r\n    const oldPeople = state.people;\r\n    let newPeople = oldPeople.filter((person) => person.id !== id);\r\n    removeDataFromIDBStore('userDatabase', '1', 'people', id);\r\n    dispatch({\r\n      type: 'REMOVE_PERSON',\r\n      payload: { people: newPeople },\r\n    });\r\n\r\n    setShowBackground(false);\r\n  };\r\n\r\n  const handleSelectPerson = (id) => {\r\n    const mql = window.matchMedia('(max-width: 768px)');\r\n    if (mql.matches) {\r\n      setShowBackground(true);\r\n    }\r\n\r\n    if (currentPersonID !== id) {\r\n      setCurrentPersonID(id);\r\n    }\r\n  };\r\n\r\n  const handleAddPersonUIForLargerScreen = () => {\r\n    setShowAddPersonUI(!showAddPersonUI);\r\n  };\r\n\r\n  const handleKeyUp = (e) => {\r\n    if (e.key === 'Escape') {\r\n      setCurrentPersonID(null);\r\n      setShowBackground(false);\r\n      setShowAddPersonUI(() => false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keyup', handleKeyUp);\r\n    return () => {\r\n      window.removeEventListener('keyup', handleKeyUp);\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    const people = showFavourites\r\n      ? filterFavouritePeople(state.people)\r\n      : state.people;\r\n    setPeopleList(people);\r\n  }, [showFavourites, state.people, setPeopleList]);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      // Sets several states according to the screen size, and active UI's (media queries weren't enough).\r\n      const mql = window.matchMedia('(min-width: 769px)');\r\n      if (mql.matches && showDeletePersonDialog) {\r\n        setCurrentPersonID(null);\r\n      }\r\n      if (\r\n        mql.matches &&\r\n        (showAddPersonUI || currentPersonID) &&\r\n        showBackground\r\n      ) {\r\n        setShowBackground(() => false);\r\n      } else if (\r\n        !mql.matches &&\r\n        (showAddPersonUI || currentPersonID) &&\r\n        !showBackground\r\n      ) {\r\n        setShowBackground(() => true);\r\n      }\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, [\r\n    showBackground,\r\n    setShowBackground,\r\n    showAddPersonUI,\r\n    currentPersonID,\r\n    setCurrentPersonID,\r\n    showDeletePersonDialog,\r\n  ]);\r\n  return (\r\n    <>\r\n      <SortingSelectbox />\r\n\r\n      {state.isNotificationOpen && (\r\n        <Notification\r\n          isTimePassed={isTimePassed}\r\n          setIsTimePassed={setIsTimePassed}\r\n        />\r\n      )}\r\n      {showDeletePersonDialog && (\r\n        <DeletePersonDialog\r\n          setShowDeletePersonDialog={setShowDeletePersonDialog}\r\n          removeItem={removeItem}\r\n          deletionUserID={deletionUserID}\r\n          setCurrentPersonID={setCurrentPersonID}\r\n        />\r\n      )}\r\n      <ul className=\"person-list\">\r\n        {peopleList &&\r\n          peopleList.map((person) => (\r\n            <Person\r\n              key={person.id}\r\n              person={person}\r\n              handleDeletePerson={handleDeletePerson}\r\n              currentPersonID={currentPersonID}\r\n              setCurrentPersonID={setCurrentPersonID}\r\n              handleSelectPerson={handleSelectPerson}\r\n              setShowBackground={setShowBackground}\r\n            />\r\n          ))}\r\n        {(showAddPersonUI && (\r\n          <AddPersonUI\r\n            setShowBackground={setShowBackground}\r\n            toggleAddPersonUI={toggleAddPersonUI}\r\n          />\r\n        )) || (\r\n          <EmptyBox\r\n            handleAddPersonUIForLargerScreen={handleAddPersonUIForLargerScreen}\r\n          />\r\n        )}\r\n      </ul>\r\n      {showEditPersonUI && (\r\n        <EditPersonUI\r\n          currentPersonID={currentPersonID}\r\n          setShowEditPersonUI={setShowEditPersonUI}\r\n          setShowBackground={setShowBackground}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PersonList;\r\n","import { useContext } from 'react';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport PersonList from '../PersonList/PersonList';\r\nimport './HomeMain.scss';\r\n\r\nfunction HomeMain(props) {\r\n  const { setShowUI } = props;\r\n  const { currentPersonID, setCurrentPersonID } = useContext(AppContext);\r\n\r\n  return (\r\n    <main className=\"home-main\">\r\n      <PersonList\r\n        currentPersonID={currentPersonID}\r\n        setCurrentPersonID={setCurrentPersonID}\r\n        setShowUI={setShowUI}\r\n      />\r\n    </main>\r\n  );\r\n}\r\nexport default HomeMain;\r\n","function handleSorting(sortState) {\r\n  switch (sortState) {\r\n    case 'sortByName':\r\n      return 'sortByAge';\r\n    case 'sortByAge':\r\n      return 'sortByMonth';\r\n    case 'sortByMonth':\r\n      return 'sortByName';\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport default handleSorting;\r\n","import { useContext } from 'react';\r\nimport './MobileNav.scss';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport sortingLogic from '../../helper/sortingLogic';\r\nimport PeopleListContext from '../../context/PeopleListContext/PeopleListContext';\r\nimport handleSorting from '../../helper/handleSorting';\r\n\r\nfunction MobileNav() {\r\n  const {\r\n    dispatch,\r\n    favState,\r\n    showAddPersonUIState,\r\n    backgroundState,\r\n    sortingState,\r\n  } = useContext(AppContext);\r\n  const [showAddPersonUI, setShowAddPersonUI] = showAddPersonUIState;\r\n  const [showFavourites, setShowFavourites] = favState;\r\n  const [showBackground, setShowBackground] = backgroundState;\r\n  const [sortState, setSortState] = sortingState;\r\n  const [peopleList, setPeopleList] = useContext(PeopleListContext);\r\n\r\n  const toggleAddPersonUI = () => {\r\n    setShowBackground(!showBackground);\r\n    setShowAddPersonUI(!showAddPersonUI);\r\n  };\r\n  const handleSortingClick = () => {\r\n    const nextSort = handleSorting(sortState);\r\n    const args = {\r\n      peopleList,\r\n      setPeopleList,\r\n      nextSort,\r\n      showFavourites,\r\n      dispatch,\r\n    };\r\n    sortingLogic(args);\r\n    setSortState(nextSort);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <nav className=\"mobile-nav\">\r\n        <button\r\n          className=\"mobile-nav__btn mobile-nav__btn--side\"\r\n          onClick={handleSortingClick}\r\n        >\r\n          <i className=\"fas fa-sort-amount-down\"></i>\r\n        </button>\r\n        <button className=\"mobile-nav__btn\" onClick={toggleAddPersonUI}>\r\n          <i className=\"fas fa-plus\"></i>\r\n        </button>\r\n\r\n        <button\r\n          className=\"mobile-nav__btn mobile-nav__btn--side\"\r\n          onClick={() => setShowFavourites(!showFavourites)}\r\n        >\r\n          <i className=\"fas fa-star\"></i>\r\n        </button>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MobileNav;\r\n","import './DarkBackground.scss';\r\nimport { AppContext } from '../../context/AppContext/AppContext';\r\nimport { useEffect, useContext } from 'react';\r\nfunction DarkBackground() {\r\n  const {\r\n    showAddPersonUIState,\r\n    showEditPersonUIState,\r\n    backgroundState,\r\n    currentPersonID,\r\n    setCurrentPersonID,\r\n  } = useContext(AppContext);\r\n  const [showAddPersonUI, setShowAddPersonUI] = showAddPersonUIState;\r\n  const [showEditPersonUI, setShowEditPersonUI] = showEditPersonUIState;\r\n  const [showBackground, setShowBackground] = backgroundState;\r\n  const handleBackground = (e) => {\r\n    if (currentPersonID || showAddPersonUI || showEditPersonUI) {\r\n      e.stopPropagation();\r\n      setShowBackground(false);\r\n      setShowEditPersonUI(false);\r\n      setShowAddPersonUI(false);\r\n      setCurrentPersonID(null);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    showBackground\r\n      ? (document.body.style.overflow = 'hidden')\r\n      : (document.body.style.overflow = 'initial');\r\n  }, [showBackground]);\r\n  const className = showBackground\r\n    ? 'dark-background dark-background--visible'\r\n    : 'dark-background';\r\n  return <div className={className} onClick={handleBackground}></div>;\r\n}\r\n\r\nexport default DarkBackground;\r\n","import React from 'react';\r\nimport PeopleListContext from \"../context/PeopleListContext/PeopleListContext\";\r\nfunction PeopleListProvider(props) {\r\n  const [peopleList, setPeopleList] = React.useState(null);\r\n  return <PeopleListContext.Provider value={[peopleList, setPeopleList]} {...props} />;\r\n}\r\n\r\nexport default PeopleListProvider;\r\n","import { getDataFromIDBStore } from './IndexedDB/indexedDBManagement';\r\n\r\nasync function getData(database, version, store) {\r\n  try {\r\n    const data = await getDataFromIDBStore(database, version, store);\r\n    return data;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default getData;\r\n","import getData from './data';\r\n\r\nasync function defaultState() {\r\n  const people = await getData('userDatabase', '1', 'people');\r\n  const defaultState = {\r\n    people: people,\r\n    isNotificationOpen: false,\r\n    notificationContext: '',\r\n  };\r\n  return defaultState;\r\n}\r\n\r\nexport default defaultState;\r\n","export const reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'ADD_PERSON':\r\n      return {\r\n        ...state,\r\n        people: action.payload,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'Person has been added.',\r\n      };\r\n\r\n    case 'REMOVE_PERSON': {\r\n      return {\r\n        ...state,\r\n        people: action.payload.people,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'Person has been deleted.',\r\n      };\r\n    }\r\n    case 'REMOVE_MODAL': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: false,\r\n        notificationContent: '',\r\n      };\r\n    }\r\n    case 'INVALID_NAME': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'Name input must include at least one character.',\r\n      };\r\n    }\r\n    case 'INVALID_DATE': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent:\r\n          'Please provide correct date format, (yyyy/mm/dd), or (dd/mm/yyyy) with any date seperators.',\r\n      };\r\n    }\r\n\r\n    case 'INVALID_DAY': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'Day value must be between 1 and 31 (inclusive).',\r\n      };\r\n    }\r\n    case 'INVALID_MONTH': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent:\r\n          'Month value must be between 1 and 12 (inclusive).',\r\n      };\r\n    }\r\n    case 'INVALID_YEAR': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent:\r\n          'Year value must be between 1000 and current year (inclusive).',\r\n      };\r\n    }\r\n    case 'SORT_PEOPLE_BY_AGE': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'SORT BY AGE',\r\n      };\r\n    }\r\n    case 'SORT_PEOPLE_BY_MONTH': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'SORT BY MONTH',\r\n      };\r\n    }\r\n    case 'SORT_PEOPLE_BY_NAME': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: 'SORT BY NAME',\r\n      };\r\n    }\r\n    case 'FILTER_PEOPLE_BY_NAME': {\r\n      return {\r\n        ...state,\r\n        people: action.payload,\r\n        isNotificationOpen: false,\r\n        notificationContent: '',\r\n      };\r\n    }\r\n    case 'INITIAL_LOAD': {\r\n      return {\r\n        ...state,\r\n        people: action.payload.people,\r\n        isNotificationOpen: false,\r\n        notificationContent: '',\r\n      };\r\n    }\r\n    case 'INVALID_FILE_TYPE': {\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent:\r\n          'Invalid file type. Please provide \".jpeg\", or \".png\" file for the picture.',\r\n      };\r\n    }\r\n    case 'ADD_FAVOURITE': {\r\n      const personName = action.payload.name;\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: `${personName} has been added to your favorites.`,\r\n        people: action.payload.people,\r\n      };\r\n    }\r\n    case 'REMOVE_FAVOURITE': {\r\n      const personName = action.payload.name;\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: `${personName} has been removed from your favorites.`,\r\n        people: action.payload.people,\r\n      };\r\n    }\r\n    case 'EDIT_PERSON': {\r\n      const personName = action.payload.name;\r\n      return {\r\n        ...state,\r\n        isNotificationOpen: true,\r\n        notificationContent: `${personName}'s information has been changed.`,\r\n        people: action.payload.people,\r\n      };\r\n    }\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n};\r\n","import { useEffect, useReducer, useState } from 'react';\r\nimport { AppContext } from '../context/AppContext/AppContext';\r\nimport defaultState from '../utils/defaultState';\r\nimport { reducer } from '../utils/reducer';\r\n\r\nfunction AppProvider(props) {\r\n  const def = {\r\n    people: [],\r\n    isNotificationOpen: false,\r\n    notificationContent: '',\r\n  };\r\n  const [state, dispatch] = useReducer(reducer, def);\r\n  const [currentPersonID, setCurrentPersonID] = useState(null);\r\n  const showAddPersonUIState = useState(false);\r\n  const showEditPersonUIState = useState(false);\r\n  const backgroundState = useState(false);\r\n  const favState = useState(false);\r\n  const sortingState = useState('sortByName');\r\n  // Default state.\r\n  const getInitialData = async () => {\r\n    const data = await defaultState();\r\n    const people = data.people;\r\n\r\n    dispatch({\r\n      type: 'INITIAL_LOAD',\r\n      payload: { people: people },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getInitialData();\r\n  }, []);\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        state,\r\n        dispatch,\r\n        favState,\r\n        backgroundState,\r\n        showAddPersonUIState,\r\n        showEditPersonUIState,\r\n        currentPersonID,\r\n        setCurrentPersonID,\r\n        sortingState,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport default AppProvider;\r\n","import AppHead from '../AppHead/AppHead';\r\nimport HomeMain from '../HomeMain/HomeMain';\r\nimport MobileNav from '../MobileNav/MobileNav';\r\nimport DarkBackground from '../DarkBackground/DarkBackground';\r\nimport PeopleListProvider from '../../providers/PeopleListProvider';\r\nimport AppProvider from '../../providers/AppProvider';\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <AppProvider>\r\n        <DarkBackground />\r\n        <PeopleListProvider>\r\n          <AppHead />\r\n          <HomeMain />\r\n          <MobileNav />\r\n        </PeopleListProvider>\r\n      </AppProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport \"./index.scss\";\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}