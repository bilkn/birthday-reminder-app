(this["webpackJsonpbirthday-reminder-app"]=this["webpackJsonpbirthday-reminder-app"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),c=n.n(a),o=n(2),s=n(1),i=n.n(s),u=(n(17),n(4)),l=n.n(u),p=n(5),b=(n(19),Object(s.createContext)(null)),d=Object(s.createContext)(null);var j=function(e,t){return e.filter((function(e){var n=e.name.toLowerCase();return t=t.toLowerCase(),n.includes(t)}))};var f=function(e){return e.filter((function(e){return e.inFavourites}))};var O=function(e){var t=e.setShowSearchBox,n=Object(s.useContext)(b),a=n.favState,c=n.state,i=Object(s.useContext)(d),u=Object(o.a)(i,2)[1],O=Object(o.a)(a,1)[0],v=Object(s.useRef)(null),h=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.current.value,m(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t=O?f(c.people):c.people;if(t){var n=j(t,e);u(n)}else console.log("Data could not found!")},x=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"",t(!1),m("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=function(e){"Escape"===e.key&&x()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Object(r.jsxs)("div",{className:"search-box",children:[Object(r.jsx)("input",{className:"search-box__search-input",type:"search",placeholder:"Search by name",onChange:h,ref:v,autoFocus:!0}),Object(r.jsx)("button",{className:"search-box__close-btn","aria-label":"Search",onClick:x,children:Object(r.jsx)("i",{className:"far fa-times-circle"})})]})};function v(e){var t=/(\d\d)(\.|-|\/)(\d\d)(\.|-|\/)(\d{4})/;return{result:t.test(e),regex:t}}function h(e){var t=/(\d{4})(\.|-|\/)(\d\d)(\.|-|\/)(\d\d)/;return{result:t.test(e),regex:t}}var m=function(e){return e.replace(/(\.|-|\/)/g,".")};function x(e,t){var n=h(e).regex;return e=v(e).result?e:e.replace(n,"$5.$3.$1"),t=v(t).result?t:t.replace(n,"$5.$3.$1"),/-|\//.test(e)&&(e=m(e)),/-|\//.test(t)&&(t=m(t)),[e,t]}var _=function(e){var t=e.peopleList,n=e.dispatch,r=e.nextSort,a=e.setPeopleList,c=e.showFavourites,s=t;"sortByAge"===r?function(e,t,n,r){var a=e.sort((function(e,t){var n=e.birthday.slice(),r=t.birthday.slice(),a=x(n,r),c=Object(o.a)(a,2);n=c[0],r=c[1];var s=n.split("."),i=Object(o.a)(s,3),u=i[0],l=i[1],p=i[2],b=r.split("."),d=Object(o.a)(b,3),j=d[0],f=d[1],O=d[2];return new Date(p,l,u).getTime()-new Date(O,f,j).getTime()}));if(r){n(a.filter((function(e){return e.inFavourites})))}else n(a);t({type:"SORT_PEOPLE_BY_AGE"})}(s,n,a,c):"sortByMonth"===r?function(e,t,n,r){var a=e.sort((function(e,t){var n=e.birthday.slice(),r=t.birthday.slice(),a=x(n,r),c=Object(o.a)(a,2);n=c[0],r=c[1];var s=n.split("."),i=Object(o.a)(s,2),u=i[0],l=i[1],p=r.split("."),b=Object(o.a)(p,2);return+b[0]+10*+b[1]-(+u+10*+l)}));if(r){n(a.filter((function(e){return e.inFavourites})))}else n(a);t({type:"SORT_PEOPLE_BY_MONTH"})}(s,n,a,c):"sortByName"===r&&function(e,t,n,r){var a=e.sort((function(e,t){var n=e.name.toLowerCase(),r=Object(o.a)(n,1)[0],a=t.name.toLowerCase(),c=Object(o.a)(a,1)[0];return r.charCodeAt(0)-c.charCodeAt(0)}));if(r){n(a.filter((function(e){return e.inFavourites})))}else n(a);t({type:"SORT_PEOPLE_BY_NAME"})}(s,n,a,c)};n(20);var y=function(){var e=Object(s.useContext)(b),t=e.dispatch,n=e.favState,a=e.sortingState,c=Object(s.useContext)(d),i=Object(o.a)(c,2),u=i[0],l=i[1],p=Object(o.a)(n,1)[0],j=Object(o.a)(a,2),f=j[0],O=j[1],v=function(e){switch(e){case"sort-by-name":return"sortByName";case"sort-by-age":return"sortByAge";case"sort-by-month":return"sortByMonth"}};return Object(r.jsxs)("select",{className:"sorting-selectbox","aria-selected":!0,role:"option",onChange:function(e){var n=e.target.value,r=v(n);_({peopleList:u,setPeopleList:l,nextSort:r,showFavourites:p,dispatch:t}),O(r)},defaultValue:f,children:[Object(r.jsx)("option",{id:"test",value:"sort-by-name",className:"sorting-selectbox__option",children:"Sort by name"}),Object(r.jsx)("option",{value:"sort-by-age",className:"sorting-selectbox__option",children:"Sort by age"}),Object(r.jsx)("option",{value:"sort-by-month",className:"sorting-selectbox__option",children:"Sort by month"})]})},N=Object(s.createContext)(null);var g=function(e){return window.matchMedia("(min-width: ".concat(e,"px)")).matches};var E=function(){var e=Object(s.useContext)(b).favState,t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),i=Object(o.a)(c,2),u=i[0],l=i[1],p=Object(s.useContext)(N),d=Object(o.a)(p,2),j=d[0],f=d[1];return Object(s.useEffect)((function(){g(769)?f((function(){return!0})):f((function(){return!1}))}),[f]),Object(r.jsxs)("header",{className:"app-head",children:[(j||!u)&&Object(r.jsx)("h1",{className:"app-head__logo",children:"BirthdayReminder"}),Object(r.jsxs)("nav",{className:"app-head-nav",children:[u&&Object(r.jsx)(O,{setShowSearchBox:l})||Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{}),Object(r.jsx)("button",{className:"app-head-nav__search-btn","aria-label":"Search",onClick:function(){return l(!u)},children:Object(r.jsx)("i",{className:"fas fa-search app-head-nav__icon"})})]}),Object(r.jsx)("button",{className:"app-head-nav__fav-btn",onClick:function(){return!a(!n)},style:{color:n?" #dcd6f7":"#c9c2e8"},"aria-label":"Favourites",children:Object(r.jsx)("i",{className:"fa fa-star app-head-nav__icon","aria-hidden":"true"})})]})]})};n(21),n(22);var I=function(e){if(e instanceof File||e instanceof Blob)return URL.createObjectURL(e);if("string"===typeof e&&(e.includes(".png")||e.includes(".jpeg")||e.includes(".jpg")))return e;throw Error("Input must be a File, String (includes .png, .jpeg or .jpg), or Blob object.")},w=n(6),P=n(3);n(23);var D=function(e,t){return e.find((function(e){return e.id===t}))},S=n(11);function C(e,t){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,Object(S.a)(t,n,{upgrade:function(e){e.createObjectStore("people",{keyPath:"id"})}});case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return");case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function k(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(l.a.mark((function e(t,n,r){var a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,C(t,n);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return c=a.transaction(r,"readwrite"),o=c.objectStore(r),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function T(e,t,n,r){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(l.a.mark((function e(t,n,r,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(n,r,a);case 3:return c=e.sent,e.next=6,c.put(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function F(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(l.a.mark((function e(t,n,r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t,n,r);case 3:return a=e.sent,e.next=6,a.getAll();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function V(){return(V=Object(p.a)(l.a.mark((function e(t,n,r,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t,n,r);case 3:e.sent.delete(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("loadend",(function(e){t(r.result)})),r.addEventListener("error",n),r.readAsArrayBuffer(e)}))}var M=function(e){var t=e.currentPersonID,n=e.setCurrentPersonID,a=e.handleDeletePerson,c=Object(s.useContext)(b),i=c.state,u=c.dispatch,l=c.backgroundState,p=c.showEditPersonUIState,d=D(i.people,t),j=Object(o.a)(l,2)[1],f=Object(o.a)(p,2)[1],O=Object(s.useState)(""),v=Object(o.a)(O,2),h=v[0],m=v[1],x=function(e){return e&&e.inFavourites},_=function(){var e=i.people.filter((function(e){return t!==e.id})),r=Object(P.a)(Object(P.a)({},d),{},{inFavourites:!0});u({type:"ADD_FAVOURITE",payload:{people:[].concat(Object(w.a)(e),[r]),name:r.name}}),T(r,"userDatabase","1","people"),n(null)},y=function(){var e=i.people.filter((function(e){return e.id!==t})),r=Object(P.a)(Object(P.a)({},d),{},{inFavourites:!1});u({type:"REMOVE_FAVOURITE",payload:{people:[].concat(Object(w.a)(e),[r]),name:r.name}}),n(null)};return Object(s.useEffect)((function(){x(d)?m("Remove from favourites"):m("Add to favourites")}),[d]),Object(r.jsxs)("div",{className:"person-options-container",onMouseEnter:function(e){var t=document.querySelector(".person__dropdown-btn");if(g(769)){var r=e.target.closest("div");r.addEventListener("mouseleave",(function e(a){j(!1);var c=a.relatedTarget;c&&!c.classList.contains("person__dropdown-btn")&&(t.style={},n(null),r.removeEventListener("mouseleave",e))}))}},children:[Object(r.jsxs)("p",{className:"person-options-container__name",children:["Person: ",d&&d.name]}),Object(r.jsxs)("ul",{className:"person-options-list",children:[Object(r.jsx)("li",{className:"person-options-list__item person-options-list__item--triangled",children:Object(r.jsx)("button",{className:"person-options-list__btn",onClick:function(e){return function(e){return e.stopPropagation(),j(!1),x(d)?y:_}(e)()},children:h})}),Object(r.jsx)("li",{className:"person-options-list__item person-options-list__item--edit-btn",children:Object(r.jsx)("button",{className:"person-options-list__btn",onClick:function(e){return function(e){e.stopPropagation(),j(!0),f(!0),setTimeout((function(){return n(null)}),0)}(e)},children:"Edit"})}),Object(r.jsx)("li",{className:"person-options-list__item person-options-list__item--delete-btn",children:Object(r.jsx)("button",{className:"person-options-list__btn",onClick:function(e){return a(e,t)},children:"Delete"})})]})]})};var Y=function(e){var t=/(\.|-|\/)/,n=e.birthday.split(t).filter((function(e){return!t.test(e)}));4!==n[0].length&&(n=n.reverse());var r=new Date(n[0],n[1],n[2]),a=Date.now()-r.getTime(),c=new Date(a);return Math.abs(c.getUTCFullYear()-1970)};var H=function(e){var t=e.person,n=e.handleDeletePerson,a=e.currentPersonID,c=e.setCurrentPersonID,i=e.handleSelectPerson,u=t.id,l=t.name,p=t.birthday,b=t.picture,d=Object(s.useState)(null),j=Object(o.a)(d,2),f=j[0],O=j[1],v=Object(s.useState)(null),h=Object(o.a)(v,2),m=h[0],x=h[1],_=Object(s.useState)(""),y=Object(o.a)(_,2),N=y[0],E=y[1],w=Object(s.useState)(null),P=Object(o.a)(w,2),D=P[0],S=P[1],C=Object(s.useState)(-1),A=Object(o.a)(C,2),k=A[0],L=A[1];Object(s.useEffect)((function(){var e,t=null;try{if("string"!==typeof b){var n=new Blob([b],{type:e});t=I(n)}else t=b}catch(r){console.log(r)}x((function(){return t}))}),[b]),Object(s.useEffect)((function(){E(a===u?"person person--highlighted":"person")}),[a,u]),Object(s.useEffect)((function(){S(Y(t))}),[t]),Object(s.useEffect)((function(){g(769)||L(-1)}),[]);var T=function(e){"Tab"!==e.key||g(769)?"Tab"===e.key&&g(769)&&L(-1):L(1)};return Object(s.useEffect)((function(){return window.addEventListener("keyup",T),function(){window.removeEventListener("keyup",T)}}),[]),Object(r.jsxs)("div",{className:N,onKeyPress:function(e){"Enter"===e.key&&i(u)},onClick:function(){g(769)||i(u)},tabIndex:k,children:[Object(r.jsx)("button",{className:"person__dropdown-btn",onMouseEnter:function(e){var t=e.target.closest("button");i(u);O({height:"50px",width:"30px"});t.addEventListener("mouseleave",(function e(n){var r=n.relatedTarget;r&&!r.classList.contains("person-options-list__item")&&(c(null),O(null),t.removeEventListener("mouseleave",e))}))},style:f,"aria-label":"Dropdown menu",children:Object(r.jsx)("i",{className:"fa fa-ellipsis-h","aria-hidden":"true"})}),a===u&&Object(r.jsx)(M,{currentPersonID:a,setCurrentPersonID:c,handleDeletePerson:n}),Object(r.jsx)("div",{className:"person-img-container",children:Object(r.jsx)("img",{className:"person-img-container__img",src:m,alt:l})}),Object(r.jsxs)("div",{className:"person-info",children:[Object(r.jsx)("p",{className:"person-info__name",children:l}),Object(r.jsx)("p",{className:"person-info__birthday",children:p})]}),Object(r.jsxs)("div",{className:"person-age-container",children:[Object(r.jsx)("p",{className:"person-age-container__title",children:"Age:"}),Object(r.jsx)("p",{className:"person-age-container__age",children:D})]})]})};n(24);var $=function(e){var t=e.setShowDeletePersonDialog,n=e.removeItem,a=e.deletionUserID,c=e.setCurrentPersonID,i=Object(s.useContext)(b),u=i.backgroundState,l=i.state,p=Object(o.a)(u,2)[1],d=function(e){e.stopPropagation(),"Yes"===e.target.textContent&&n(a),t(!1),p(!1),c(!1)};return Object(r.jsxs)("div",{className:"delete-person-dialog",children:[Object(r.jsx)("p",{className:"delete-person-dialog__text",children:" Are you really want to delete ".concat(D(l.people,a).name,"?")}),Object(r.jsxs)("div",{className:"delete-person-dialog-controls",children:[Object(r.jsx)("button",{className:"delete-person-dialog-controls__btn",onClick:d,autoFocus:!0,children:"Yes"}),Object(r.jsx)("button",{className:"delete-person-dialog-controls__btn delete-person-dialog-controls__btn--no-margin",onClick:d,children:"No"})]})]})},G=(n(25),n.p+"static/media/no-picture.2fda6558.png"),K=function(e){try{if("string"===typeof e)return!0;var t=e.type;return"image/jpeg"===t||"image/png"===t||e instanceof ArrayBuffer}catch(n){return console.log(n),!1}};n(26);var z=function(e){var t=e.setDidUserUploadPicture,n=e.setCurrentPicture,a=Object(s.useContext)(b).dispatch,c=Object(s.useRef)(null);return Object(s.useEffect)((function(){c.current.focus()}),[]),Object(r.jsxs)("div",{className:"picture-input-container",children:[Object(r.jsx)("label",{htmlFor:"picture",className:"picture-input-container__label",tabIndex:0,ref:c,onKeyDown:function(e){"Enter"===e.key&&c.current.click()},children:Object(r.jsx)("i",{className:"fas fa-camera picture-input-container__icon","aria-hidden":!0})}),Object(r.jsx)("input",{id:"picture",type:"file",className:"picture-input-container__picture",accept:"image/png, image/jpeg",onChange:function(e){var r=e.target.files[0];K(r)?(t(!0),n(r)):a({type:"INVALID_FILE_TYPE"})},hidden:!0})]})};var J=function(e,t,n){return e.length<=0?"INVALID_NAME":function(e){return v(e).result||h(e).result}(t)?function(e){var t=v(e).result?+e.slice(0,2):+e.slice(-2);return t<=31&&t>0}(t)?function(e){var t=v(e).result?+e.slice(3,5):+e.slice(5,7);return t<=12&&t>0}(t)?function(e){var t=v(e).result?+e.slice(-4):+e.slice(0,4);return t<=(new Date).getFullYear()&&t>1e3}(t)?!!K(n)||"INVALID_FILE_TYPE":"INVALID_YEAR":"INVALID_MONTH":"INVALID_DAY":"INVALID_DATE"};n(27);var q=function(e){var t=e.handleAddPerson;return Object(r.jsx)("div",{className:"add-person-ui-controls",children:Object(r.jsx)("button",{className:"add-person-ui-controls__add-btn",onClick:function(){t()},children:Object(r.jsx)("i",{className:"fa fa-plus-circle add-person-ui-controls__icon","aria-hidden":"true"})})})};n(28);var Q=function(e){var t=e.nameContainer,n=e.dateContainer,a=e.name,c=e.birthday;return Object(r.jsxs)("div",{className:"add-person-ui-info-container",children:[Object(r.jsx)("input",{type:"text",className:"add-person-ui-info-container__name",ref:t,maxLength:"15",placeholder:"Name",defaultValue:a||""}),Object(r.jsx)("input",{type:"text",className:"add-person-ui-info-container__birthday",ref:n,defaultValue:c||"",maxLength:"10",placeholder:"dd/mm/yyyy"})]})};n(29);var W=function(e){var t=e.createFileURL,n=e.currentPicture,a=e.nameContainer;return Object(r.jsx)("div",{className:"person-img-container",children:Object(r.jsx)("img",{className:"person-img-container__img",src:t(n),alt:a.current.value})})};var X=function(e){var t=e.setShowBackground,n=e.toggleAddPersonUI,a=Object(s.useContext)(b),c=a.state,i=a.dispatch,u=Object(s.useState)(!1),d=Object(o.a)(u,2),j=d[0],f=d[1],O=Object(s.useState)(null),v=Object(o.a)(O,2),h=v[0],m=v[1],x=Object(s.useRef)(null),_=Object(s.useRef)(null),y=function(){var e=Object(p.a)(l.a.mark((function e(){var r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x.current.value,a=_.current.value,!h){e.next=8;break}return e.next=5,U(h);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=G;case 9:c=e.t0,o=J(r,a,c),e.t1=o,e.next="INVALID_NAME"===e.t1||"INVALID_DATE"===e.t1||"INVALID_DAY"===e.t1||"INVALID_MONTH"===e.t1||"INVALID_YEAR"===e.t1||"INVALID_FILE_TYPE"===e.t1?14:16;break;case 14:return i({type:o}),e.abrupt("break",20);case 16:return N(r,a,c),n(),t(!1),e.abrupt("break",20);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e,t,n){e=e.charAt(0).toUpperCase()+e.slice(1);var r=g(e,t,n);i({type:"ADD_PERSON",payload:[].concat(Object(w.a)(c.people),[r])}),T(r,"userDatabase","1","people")},g=function(e,t,n){return{id:(new Date).getTime().toString(),name:e,birthday:t,picture:n,inFavourites:!1}};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"add-person-ui",children:[j?Object(r.jsx)(W,{createFileURL:I,currentPicture:h,nameContainer:x}):Object(r.jsx)(z,{setDidUserUploadPicture:f,currentPicture:h,setCurrentPicture:m}),Object(r.jsx)(Q,{nameContainer:x,dateContainer:_}),Object(r.jsx)(q,{handleAddPerson:y}),Object(r.jsx)("button",{className:"add-person-ui__close-btn",onClick:n,children:Object(r.jsx)("i",{className:"fas fa-times"})})]})})};n(30);var Z=function(e){var t=e.handleAddPersonUIForLargerScreen;return Object(r.jsx)("li",{className:"add-person-ui-large",tabIndex:0,onClick:function(e){t(e)},onKeyDown:function(e){"Enter"===e.key&&t(e)},children:Object(r.jsx)("div",{className:"add-person-ui-large__icon-container",children:Object(r.jsx)("i",{className:"fa fa-plus add-person-ui-large__add-icon","aria-hidden":"true"})})})};n(31);var ee=function(e){var t=e.handleAcceptClick;return Object(r.jsx)("div",{className:"edit-person-ui-controls",children:Object(r.jsx)("button",{className:"edit-person-ui-controls__accept-btn",onClick:function(e){return t(e)},children:Object(r.jsx)("i",{className:"fas fa-check-circle edit-person-ui-controls__icon","aria-hidden":!0})})})};n(32);var te=function(e){var t=e.currentPersonID,n=e.setShowEditPersonUI,a=e.setShowBackground,c=t,i=Object(s.useRef)(null),u=Object(s.useRef)(null),d=Object(s.useContext)(b),j=d.state,f=d.dispatch,O=Object(s.useState)(c),v=Object(o.a)(O,1)[0],h=Object(s.useState)(null),m=Object(o.a)(h,2),x=m[0],_=m[1],y=Object(s.useState)(!1),N=Object(o.a)(y,2),g=N[0],E=N[1],S=D(j.people,v),C=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,c,o,s,p,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),r=i.current.value,c=u.current.value,o=g?x:S.picture,s=null,e.prev=5,e.next=8,A(r,c,o);case 8:s=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0);case 14:s?(p=j.people.filter((function(e){return e.id!==v})),b=[].concat(Object(w.a)(p),[s]),T(s,"userDatabase","1","people"),f({type:"EDIT_PERSON",payload:{people:b,name:s.name}}),a(!1),n(!1)):console.log("EDIT PERSON ERROR!");case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(l.a.mark((function e(t,n,r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(P.a)(Object(P.a)({},S),{},{id:v,name:t,birthday:n,picture:r}),!x){e.next=7;break}return e.next=4,U(x);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=G;case 8:r=e.t0,c=J(t,n,r),e.t1=c,e.next="INVALID_NAME"===e.t1||"INVALID_DATE"===e.t1||"INVALID_DAY"===e.t1||"INVALID_MONTH"===e.t1||"INVALID_YEAR"===e.t1||"INVALID_FILE_TYPE"===e.t1?13:15;break;case 13:return f({type:c}),e.abrupt("break",16);case 15:return e.abrupt("return",a);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=function(e){"Escape"===e.key&&n(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),Object(r.jsxs)("div",{className:"edit-person-ui",children:[g?Object(r.jsx)(W,{createFileURL:I,currentPicture:x,nameContainer:i}):Object(r.jsx)(z,{setDidUserUploadPicture:E,currentPicture:x,setCurrentPicture:_}),Object(r.jsx)(Q,{name:S.name,birthday:S.birthday,currentPersonID:t,nameContainer:i,dateContainer:u}),Object(r.jsx)(ee,{handleAcceptClick:C})]})};n(33);var ne=function(e){var t=e.isTimePassed,n=e.setIsTimePassed,a=Object(s.useContext)(b),c=a.state,o=a.dispatch;Object(s.useEffect)((function(){t&&(n(!1),setTimeout(i,2500))}));var i=function(){o({type:"REMOVE_MODAL"}),n(!0)};return Object(r.jsx)("p",{className:"notification",children:c.notificationContent})};var re=function(e){var t=e.currentPersonID,n=e.setCurrentPersonID,a=Object(s.useContext)(d),c=Object(o.a)(a,2),i=c[0],u=c[1],l=Object(s.useContext)(N),p=Object(o.a)(l,2)[1],j=Object(s.useContext)(b),O=j.state,v=j.dispatch,h=j.favState,m=j.backgroundState,x=j.showEditPersonUIState,y=j.showAddPersonUIState,E=Object(o.a)(y,2),I=E[0],w=E[1],P=Object(o.a)(h,1)[0],D=Object(o.a)(m,2),S=D[0],C=D[1],A=Object(o.a)(x,2),k=A[0],L=A[1],T=Object(s.useState)(!1),R=Object(o.a)(T,2),F=R[0],B=R[1],U=Object(s.useState)(null),M=Object(o.a)(U,2),Y=M[0],G=M[1],K=Object(s.useState)(!0),z=Object(o.a)(K,2),J=z[0],q=z[1],Q=Object(s.useState)(!1),W=Object(o.a)(Q,2),ee=W[0],re=W[1],ae=function(e,t){g(769)||n(null),e.stopPropagation(),B(!0),G(t)},ce=function(e){g(769)||C(!0),t!==e&&n(e)};return Object(s.useEffect)((function(){var e=function(e){"Escape"===e.key&&(n(null),C(!1),w((function(){return!1})))};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[n,C,w]),Object(s.useEffect)((function(){var e=P?f(O.people):O.people;u(e)}),[P,O.people,u]),Object(s.useEffect)((function(){var e=function(){var e=g(769);p(e?function(){return!0}:function(){return!1}),e&&(I||t||F)&&S?C((function(){return!1})):e||!(I||t||F)||S||C((function(){return!0}))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[S,C,I,t,F,p]),Object(s.useEffect)((function(){if(i.length&&!ee){_({peopleList:i,setPeopleList:u,nextSort:"sortByName",showFavourites:P,dispatch:v}),re(!0)}}),[v,i,u,ee,P]),Object(r.jsxs)(r.Fragment,{children:[O.isNotificationOpen&&Object(r.jsx)(ne,{isTimePassed:J,setIsTimePassed:q}),F&&Object(r.jsx)($,{setShowDeletePersonDialog:B,removeItem:function(e){var t=O.people.filter((function(t){return t.id!==e}));!function(e,t,n,r){V.apply(this,arguments)}("userDatabase","1","people",e),v({type:"REMOVE_PERSON",payload:{people:t}}),C(!1)},deletionUserID:Y,setCurrentPersonID:n}),Object(r.jsxs)("ul",{className:"people-list",children:[i&&i.map((function(e){return Object(r.jsx)(H,{person:e,handleDeletePerson:ae,currentPersonID:t,setCurrentPersonID:n,handleSelectPerson:ce,setShowBackground:C},e.id)})),I&&Object(r.jsx)(X,{setShowBackground:C,toggleAddPersonUI:function(){w((function(){return!I}))}})||Object(r.jsx)(Z,{handleAddPersonUIForLargerScreen:function(){w(!I)}})]}),k&&Object(r.jsx)(te,{currentPersonID:t,setShowEditPersonUI:L,setShowBackground:C})]})};n(34);var ae=function(e){var t=e.setShowUI,n=Object(s.useContext)(b),a=n.currentPersonID,c=n.setCurrentPersonID;return Object(r.jsx)("main",{className:"home-main",children:Object(r.jsx)(re,{currentPersonID:a,setCurrentPersonID:c,setShowUI:t})})};n(35);var ce=function(e){switch(e){case"sortByName":return"sortByAge";case"sortByAge":return"sortByMonth";case"sortByMonth":return"sortByName"}};var oe=function(){var e=Object(s.useContext)(b),t=e.dispatch,n=e.favState,a=e.showAddPersonUIState,c=e.backgroundState,i=e.sortingState,u=Object(o.a)(a,2),l=u[0],p=u[1],j=Object(o.a)(n,2),f=j[0],O=j[1],v=Object(o.a)(c,2),h=v[0],m=v[1],x=Object(o.a)(i,2),y=x[0],N=x[1],g=Object(s.useContext)(d),E=Object(o.a)(g,2),I=E[0],w=E[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("nav",{className:"mobile-nav",children:[Object(r.jsx)("button",{className:"mobile-nav__btn mobile-nav__btn--side","aria-label":"Sort people list",onClick:function(){var e=ce(y);_({peopleList:I,setPeopleList:w,nextSort:e,showFavourites:f,dispatch:t}),N(e)},children:Object(r.jsx)("i",{className:"fas fa-sort-amount-down"})}),Object(r.jsx)("button",{className:"mobile-nav__btn","aria-label":"Add person",onClick:function(){m(!h),p(!l)},children:Object(r.jsx)("i",{className:"fas fa-plus"})}),Object(r.jsx)("button",{className:"mobile-nav__btn mobile-nav__btn--side","aria-label":"Toggle favourites",onClick:function(){return O(!f)},children:Object(r.jsx)("i",{className:"fas fa-star"})})]})})};n(36);var se=function(){var e=Object(s.useContext)(b),t=e.showAddPersonUIState,n=e.showEditPersonUIState,a=e.backgroundState,c=e.currentPersonID,i=e.setCurrentPersonID,u=Object(o.a)(t,2),l=u[0],p=u[1],d=Object(o.a)(n,2),j=d[0],f=d[1],O=Object(o.a)(a,2),v=O[0],h=O[1];Object(s.useEffect)((function(){document.body.style.overflow=v?"hidden":"initial"}),[v]);var m=v?"dark-background dark-background--visible":"dark-background";return Object(r.jsx)("div",{className:m,onClick:function(e){(c||l||j)&&(e.stopPropagation(),h(!1),f(!1),p(!1),i(null))}})};var ie=function(e){var t=i.a.useState([]),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(r.jsx)(d.Provider,Object(P.a)({value:[a,c]},e))};function ue(){return(ue=Object(p.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var le=function(e,t,n){return ue.apply(this,arguments)};function pe(){return(pe=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("userDatabase","1","people");case 2:return t=e.sent,n={people:t,isNotificationOpen:!1,notificationContext:""},e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=function(){return pe.apply(this,arguments)},de=function(e,t){switch(t.type){case"ADD_PERSON":return Object(P.a)(Object(P.a)({},e),{},{people:t.payload,isNotificationOpen:!0,notificationContent:"Person has been added."});case"REMOVE_PERSON":return Object(P.a)(Object(P.a)({},e),{},{people:t.payload.people,isNotificationOpen:!0,notificationContent:"Person has been deleted."});case"REMOVE_MODAL":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!1,notificationContent:""});case"INVALID_NAME":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Name input must include at least one character."});case"INVALID_DATE":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Please provide correct date format, (yyyy/mm/dd), or (dd/mm/yyyy) with any date seperators."});case"INVALID_DAY":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Day value must be between 1 and 31 (inclusive)."});case"INVALID_MONTH":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Month value must be between 1 and 12 (inclusive)."});case"INVALID_YEAR":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Year value must be between 1000 and current year (inclusive)."});case"SORT_PEOPLE_BY_AGE":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"SORT BY AGE"});case"SORT_PEOPLE_BY_MONTH":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"SORT BY MONTH"});case"SORT_PEOPLE_BY_NAME":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"SORT BY NAME"});case"FILTER_PEOPLE_BY_NAME":return Object(P.a)(Object(P.a)({},e),{},{people:t.payload,isNotificationOpen:!1,notificationContent:""});case"INITIAL_LOAD":return Object(P.a)(Object(P.a)({},e),{},{people:t.payload.people,isNotificationOpen:!1,notificationContent:""});case"INVALID_FILE_TYPE":return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:'Invalid file type. Please provide ".jpeg", or ".png" file for the picture.'});case"ADD_FAVOURITE":var n=t.payload.name;return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"".concat(n," has been added to your favorites."),people:t.payload.people});case"REMOVE_FAVOURITE":var r=t.payload.name;return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"".concat(r," has been removed from your favorites."),people:t.payload.people});case"EDIT_PERSON":var a=t.payload.name;return Object(P.a)(Object(P.a)({},e),{},{isNotificationOpen:!0,notificationContent:"".concat(a,"'s information has been changed."),people:t.payload.people});default:throw new Error("Unhandled action type: ".concat(t.type))}};var je=function(e){var t=Object(s.useReducer)(de,{people:[],isNotificationOpen:!1,notificationContent:""}),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(null),u=Object(o.a)(i,2),d=u[0],j=u[1],f=Object(s.useState)(!1),O=Object(s.useState)(!1),v=Object(s.useState)(!1),h=Object(s.useState)(!1),m=Object(s.useState)("sortByName"),x=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:t=e.sent,n=t.people,c({type:"INITIAL_LOAD",payload:{people:n}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){x()}),[]),Object(r.jsx)(b.Provider,Object(P.a)({value:{state:a,dispatch:c,favState:h,backgroundState:v,showAddPersonUIState:f,showEditPersonUIState:O,currentPersonID:d,setCurrentPersonID:j,sortingState:m}},e))};var fe=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(r.jsx)(N.Provider,Object(P.a)({value:[a,c]},e))};var Oe=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(je,{children:[Object(r.jsx)(se,{}),Object(r.jsxs)(ie,{children:[Object(r.jsxs)(fe,{children:[Object(r.jsx)(E,{}),Object(r.jsx)(ae,{})]}),Object(r.jsx)(oe,{})]})]})})};n(37);c.a.render(Object(r.jsx)(Oe,{}),document.getElementById("root"))}],[[38,1,2]]]);
//# sourceMappingURL=main.efe2bb46.chunk.js.map